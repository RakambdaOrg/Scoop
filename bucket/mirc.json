{
    "$schema": "https://raw.githubusercontent.com/ScoopInstaller/Scoop/master/schema.json",
    "homepage": "https://www.mirc.com/",
    "version": "7.83",
    "description": "mIRC is a popular Internet Relay Chat client used by individuals and organizations to communicate, share, play and work with each other on IRC networks around the world. Serving the Internet community for over two decades, mIRC has evolved into a powerful, reliable and fun piece of technology.",
    "license": "Shareware",
    "url": "https://www.mirc.com/get.php#/dl.exe",
    "hash": "c4e001b16aefb94158c6ee0324491b843639548fe5facbb04a03f45b7e3847a9",
    "post_install": [
        "$iniFile=\"$dir\\mirc.ini\"",
        "if (!(Test-Path \"$iniFile\")) {",
        "    Write-Host \"Creating mIRC ini file at $iniFile\"",
        "    New-Item \"$iniFile\" -ItemType File | Out-Null",
        "}",
        "Write-Host \"Setting mIRC to run in portable mode\"",
        "(Get-Content \"$iniFile\").Replace('portable=no', 'portable=yes').Replace('check=1', 'check=0') | Set-Content \"$iniFile\"",
        "$hasFilesDefinitions = Select-String -Quiet -Pattern \"[files]\" -Path \"iniFile\"",
        "if (-not $hasFilesDefinitions) {",
        "   Add-Content -Path \"$iniFile\" -Value \"[files]`r`nservers=configs/servers.ini`r`nurls=configs/urls.ini`r`naddrbk=configs/addrbk.ini`r`nchannels=configs/channels.ini\"",
        "}"
    ],
    "installer": {
        "args": [
            "/S",
            "/D=$dir"
        ]
    },
    "uninstaller": {
        "file": "uninstall.exe",
        "args": [
            "/S"
        ]
    },
    "bin": [
        "mirc.exe"
    ],
    "shortcuts": [
        [
            "mirc.exe",
            "mIRC",
            "-portable"
        ]
    ],
    "persist": [
        "mirc.ini",
        "servers.ini",
        "channels",
        "configs",
        "download",
        "logs",
        "scripts",
        "sounds"
    ],
    "checkver": {
        "url": "https://www.mirc.com/versions.txt",
        "regex": "mIRC v(\\d+\\.\\d+)"
    },
    "autoupdate": {
        "url": "https://www.mirc.com/get.php#/dl.7z"
    }
}
